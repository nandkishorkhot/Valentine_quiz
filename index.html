<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Love Story ‚ù§Ô∏è</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Arial', sans-serif;
  background: linear-gradient(135deg, #ff6b9d, #ff8fab, #ffb3c1);
  min-height: 100vh;
  overflow-x: hidden;
  color: #fff;
}

/* Canvas for interactive background */
#heartCanvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
}

/* Main container */
.container {
  position: relative;
  z-index: 1;
  max-width: 1000px;
  margin: 0 auto;
  padding: 20px;
}

/* Start Screen */
.start-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  text-align: center;
  animation: fadeIn 1s ease;
}

.start-screen h1 {
  font-size: 3.5rem;
  margin-bottom: 20px;
  text-shadow: 3px 3px 0 #ff3366;
  animation: pulse 2s infinite;
}

.start-screen p {
  font-size: 1.2rem;
  margin-bottom: 30px;
  max-width: 600px;
  line-height: 1.6;
}

.start-btn {
  background: linear-gradient(45deg, #ff3366, #ff6699);
  color: white;
  border: none;
  padding: 18px 45px;
  font-size: 1.3rem;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 10px 30px rgba(255, 51, 102, 0.3);
  margin-top: 20px;
}

.start-btn:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(255, 51, 102, 0.4);
}

/* Quiz Container */
.quiz-container {
  display: none;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 30px;
  margin-top: 30px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
}

/* Question Display */
.question-number {
  background: rgba(255, 51, 102, 0.2);
  padding: 10px 20px;
  border-radius: 30px;
  display: inline-block;
  margin-bottom: 20px;
  font-weight: bold;
}

.question-text {
  font-size: 1.8rem;
  margin-bottom: 30px;
  line-height: 1.4;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
}

/* Options */
.options-container {
  display: grid;
  gap: 15px;
  margin-bottom: 30px;
}

.option-btn {
  background: rgba(255, 255, 255, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.3);
  color: white;
  padding: 18px 25px;
  border-radius: 15px;
  font-size: 1.1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: left;
  backdrop-filter: blur(5px);
}

.option-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: translateX(10px);
}

.option-btn.correct {
  background: linear-gradient(45deg, #4CAF50, #45a049);
  border-color: #4CAF50;
  animation: correctPulse 0.5s ease;
}

.option-btn.wrong {
  background: linear-gradient(45deg, #ff4444, #cc0000);
  border-color: #ff4444;
  animation: shake 0.5s ease;
}

/* Question Image */
.question-image {
  width: 100%;
  max-width: 400px;
  height: 250px;
  object-fit: cover;
  border-radius: 15px;
  margin: 20px auto;
  display: block;
  border: 3px solid white;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  animation: float 3s ease-in-out infinite;
}

/* Quote Container */
.quote-container {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  padding: 20px;
  margin: 25px 0;
  border-left: 4px solid #ff3366;
  animation: slideIn 0.8s ease;
}

.quote-text {
  font-style: italic;
  font-size: 1.2rem;
  line-height: 1.6;
  margin-bottom: 10px;
  text-align: center;
}

.quote-author {
  text-align: right;
  font-size: 0.9rem;
  opacity: 0.8;
  font-style: normal;
}

/* Progress Bar */
.progress-container {
  width: 100%;
  height: 10px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 5px;
  margin: 30px 0;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, #ff3366, #ff6699);
  width: 0%;
  transition: width 0.5s ease;
  border-radius: 5px;
}

/* Score Display */
.score-display {
  display: none;
  text-align: center;
  padding: 40px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  margin-top: 30px;
  backdrop-filter: blur(10px);
}

.score-value {
  font-size: 4rem;
  background: linear-gradient(45deg, #ff3366, #ff6699);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin: 20px 0;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
}

.score-message {
  font-size: 1.5rem;
  margin: 30px 0;
  line-height: 1.6;
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-15px); }
}

@keyframes correctPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); box-shadow: 0 0 30px #4CAF50; }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}

@keyframes slideIn {
  from { opacity: 0; transform: translateX(-20px); }
  to { opacity: 1; transform: translateX(0); }
}

/* LOVE WEATHER FORECAST WITH DOMINO SIDES */
.love-weather-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin: 40px 0;
  align-items: stretch;
}

/* Domino Side Columns */
.domino-column {
  flex: 1;
  min-width: 150px;
  max-width: 200px;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.domino-column.left {
  align-items: flex-end;
}

.domino-column.right {
  align-items: flex-start;
}

.domino-piece {
  width: 140px;
  height: 140px;
  border-radius: 15px;
  overflow: hidden;
  opacity: 0;
  transform: translateY(20px);
  animation: dominoSlide 0.8s ease forwards;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  border: 3px solid white;
  position: relative;
  cursor: pointer;
  transition: transform 0.3s ease;
}

.domino-piece:hover {
  transform: scale(1.1);
  z-index: 10;
}

.domino-piece img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.domino-piece:hover img {
  transform: scale(1.1);
}

.domino-number {
  position: absolute;
  top: 10px;
  left: 10px;
  background: #ff3366;
  color: white;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 14px;
  z-index: 2;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

/* Left column specific */
.domino-column.left .domino-piece {
  animation-delay: calc(var(--index) * 0.2s);
  transform-origin: right center;
}

/* Right column specific */
.domino-column.right .domino-piece {
  animation-delay: calc((var(--index) + 1) * 0.2s);
  transform-origin: left center;
}

@keyframes dominoSlide {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.8);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Love Weather Center */
.love-weather {
  flex: 2;
  min-width: 300px;
  background: rgba(255, 255, 255, 0.1);
  padding: 30px;
  border-radius: 20px;
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255, 255, 255, 0.2);
}

.weather-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 15px;
  margin: 20px 0;
}

.weather-card {
  background: rgba(255, 255, 255, 0.15);
  padding: 20px;
  border-radius: 15px;
  text-align: center;
  animation: fadeIn 0.5s ease forwards;
  opacity: 0;
  backdrop-filter: blur(5px);
  transition: transform 0.3s ease;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.weather-card:hover {
  transform: translateY(-5px);
  background: rgba(255, 255, 255, 0.2);
}

.weather-day {
  font-size: 1.2rem;
  font-weight: bold;
  color: #ff3366;
  margin-bottom: 10px;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
}

.weather-icon {
  font-size: 40px;
  margin: 10px 0;
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
}

.weather-temp {
  font-size: 24px;
  font-weight: bold;
  color: #fff;
  margin: 10px 0;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  background: linear-gradient(45deg, #ff3366, #ff6699);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  padding: 5px;
}

.weather-desc {
  font-size: 0.9rem;
  opacity: 0.9;
  line-height: 1.4;
}

.weather-radar {
  margin-top: 40px;
  padding: 20px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 15px;
  border: 2px solid rgba(255, 51, 102, 0.3);
}

.radar-screen {
  width: 250px;
  height: 250px;
  border-radius: 50%;
  border: 3px solid #ff3366;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  background: radial-gradient(circle, #001122 0%, #000811 100%);
  box-shadow: 0 0 40px rgba(255, 51, 102, 0.3);
}

.radar-sweep {
  position: absolute;
  width: 100%;
  height: 100%;
  background: conic-gradient(
    transparent 270deg,
    rgba(255, 51, 102, 0.3) 360deg
  );
  animation: radarSweep 3s linear infinite;
}

@keyframes radarSweep {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.love-blip {
  position: absolute;
  width: 20px;
  height: 20px;
  background: radial-gradient(circle, #ff3366, #ff6699);
  border-radius: 50%;
  animation: blipPulse 2s ease infinite;
  animation-delay: calc(var(--delay) * 0.5s);
  box-shadow: 0 0 20px #ff3366;
}

.love-blip:nth-child(1) { top: 30%; left: 40%; }
.love-blip:nth-child(2) { top: 60%; left: 60%; }
.love-blip:nth-child(3) { top: 40%; left: 70%; }

@keyframes blipPulse {
  0%, 100% { transform: scale(1); opacity: 0.5; }
  50% { transform: scale(1.5); opacity: 1; }
}

.radar-label {
  text-align: center;
  margin-top: 15px;
  font-size: 1.1rem;
  color: #ffccdd;
  font-style: italic;
}

/* INFINITY LOVE LOOP STYLES */
.infinity-love {
  background: rgba(255, 255, 255, 0.1);
  padding: 30px;
  border-radius: 20px;
  margin: 30px 0;
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255, 255, 255, 0.2);
  text-align: center;
}

.infinity-container {
  position: relative;
  width: 300px;
  height: 300px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
}

.infinity-symbol {
  font-size: 120px;
  color: #ff3366;
  animation: rotateInfinity 4s linear infinite;
  text-shadow: 0 0 30px rgba(255, 51, 102, 0.5);
  filter: drop-shadow(0 0 20px rgba(255, 51, 102, 0.3));
  position: relative;
  z-index: 2;
}

@keyframes rotateInfinity {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.floating-hearts {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

.floating-heart {
  position: absolute;
  font-size: 24px;
  animation: floatAround 10s linear infinite;
  animation-delay: calc(var(--i) * -1s);
  left: 50%;
  top: 50%;
  filter: drop-shadow(0 0 5px rgba(255, 51, 102, 0.5));
}

@keyframes floatAround {
  0% {
    transform: 
      rotate(calc(var(--i) * 30deg))
      translateX(150px)
      rotate(calc(var(--i) * -30deg));
  }
  100% {
    transform: 
      rotate(calc(var(--i) * 30deg + 360deg))
      translateX(150px)
      rotate(calc(var(--i) * -30deg - 360deg));
  }
}

.infinity-controls {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin: 30px 0;
  flex-wrap: wrap;
}

.infinity-controls button {
  background: rgba(255, 255, 255, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.3);
  color: white;
  padding: 10px 20px;
  border-radius: 25px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 1rem;
  backdrop-filter: blur(5px);
}

.infinity-controls button:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: translateY(-3px);
}

.infinity-counter {
  font-size: 1.5rem;
  margin: 20px 0;
  padding: 15px;
  background: rgba(255, 51, 102, 0.2);
  border-radius: 15px;
  display: inline-block;
}

#loopCount {
  font-size: 2.5rem;
  font-weight: bold;
  color: #ff3366;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.infinity-message {
  font-size: 1.2rem;
  margin-top: 20px;
  padding: 15px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  font-style: italic;
  border-left: 4px solid #ff3366;
}

/* Controls */
.controls {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 30px;
}

.control-btn {
  background: linear-gradient(45deg, #ff3366, #ff6699);
  color: white;
  border: none;
  padding: 15px 35px;
  font-size: 1.1rem;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 8px 20px rgba(255, 51, 102, 0.3);
}

.control-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 25px rgba(255, 51, 102, 0.4);
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 15px;
  }
  
  .start-screen h1 {
    font-size: 2.5rem;
  }
  
  .question-text {
    font-size: 1.5rem;
  }
  
  .option-btn {
    padding: 15px 20px;
    font-size: 1rem;
  }
  
  .love-weather-container {
    flex-direction: column;
  }
  
  .domino-column {
    flex-direction: row;
    max-width: 100%;
    overflow-x: auto;
    padding: 10px 0;
    gap: 10px;
  }
  
  .domino-piece {
    width: 120px;
    height: 120px;
    flex-shrink: 0;
  }
  
  .weather-cards {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .weather-card {
    padding: 15px;
  }
  
  .infinity-container {
    width: 250px;
    height: 250px;
  }
  
  .infinity-symbol {
    font-size: 90px;
  }
  
  .floating-heart {
    font-size: 20px;
  }
  
  .radar-screen {
    width: 200px;
    height: 200px;
  }
}
</style>
</head>
<body>

<!-- Interactive Background Canvas -->
<canvas id="heartCanvas"></canvas>

<div class="container">
  <!-- Start Screen -->
  <div class="start-screen" id="startScreen">
    <h1>üíò Our Love Story üíò</h1>
    <p>Take this romantic journey through our special moments. Answer questions about our relationship and relive our beautiful memories together. Every answer brings us closer!</p>
    
    <button class="start-btn" onclick="startQuiz()">
      ‚ù§Ô∏è Begin Our Journey ‚ù§Ô∏è
    </button>
    
    <div style="margin-top: 40px; opacity: 0.8;">
      <p>üéµ Background music included</p>
      <p>üíñ Thoughtful quotes after each answer</p>
      <p>üåà Discover our love weather forecast</p>
      <p>üì∏ See all our memories on the sides</p>
      <p>‚ôæÔ∏è Experience infinite love loops</p>
    </div>
  </div>

  <!-- Quiz Container -->
  <div class="quiz-container" id="quizContainer">
    <div class="question-number" id="questionNumber">Question 1 of 11</div>
    <div class="question-text" id="questionText"></div>
    
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <div class="options-container" id="optionsContainer"></div>
    
    <!-- Quote Display Area -->
    <div class="quote-container" id="quoteContainer" style="display: none;">
      <div class="quote-text" id="quoteText"></div>
      <div class="quote-author" id="quoteAuthor"></div>
    </div>
    
    <img class="question-image" id="questionImage" src="" alt="Memory Image">
    
    <div class="controls">
      <button class="control-btn" onclick="nextQuestion()" id="nextBtn" style="display: none;">Continue üíï</button>
    </div>
  </div>

  <!-- Score Display -->
  <div class="score-display" id="scoreDisplay">
    <h2>Quiz Complete! üéâ</h2>
    <div class="score-value" id="scoreValue">0/11</div>
    <div class="score-message" id="scoreMessage"></div>
    
    <!-- Love Weather with Domino Sides -->
    <div id="loveWeatherContainer"></div>
    
    <!-- Infinity Love Loop -->
    <div id="infinityLoveContainer"></div>
    
    <div class="controls">
      <button class="control-btn" onclick="restartQuiz()">Play Again üîÑ</button>
    </div>
  </div>
</div>

<script>
// Thoughtful quotes for after each question
const romanticQuotes = [
  "Love is not about how many days, weeks or months you've been together, it's all about how much you love each other every day.",
  "True love stories never have endings.",
  "I love you not only for what you are, but for what I am when I am with you.",
  "You are the source of my joy, the center of my world, the whole of my heart.",
  "If I had a flower for every time I thought of you, I could walk in my garden forever.",
  "The best thing to hold onto in life is each other.",
  "I saw that you were perfect, and so I loved you. Then I saw that you were not perfect and I loved you even more.",
  "You're my today and all of my tomorrows.",
  "I love you more than I have ever found a way to say to you.",
  "In all the world, there is no heart for me like yours. In all the world, there is no love for you like mine.",
  "I choose you. And I'll choose you over and over. Without pause, without a doubt, in a heartbeat. I'll keep choosing you."
];

const quoteAuthors = [
  "Anonymous",
  "Richard Bach",
  "Elizabeth Barrett Browning",
  "Anonymous",
  "Alfred Lord Tennyson",
  "Audrey Hepburn",
  "Angelita Lim",
  "Leo Christopher",
  "Ben Folds",
  "Maya Angelou",
  "Anonymous"
];

// Quiz Data
const questions = [
  {
    q: "When was our first meeting? üåü",
    img: "media/q1.jpg",
    caption: "Our first meeting üíï",
    options: ["October 3, 2023", "January 1, 2024", "October 5, 2023"],
    correct: 0
  },
  {
    q: "Who usually takes longer to reply? üì±",
    img: "media/q2.jpg",
    caption: "Texting moments üíå",
    options: ["I do", "You do üòâ", "We're both quick"],
    correct: 1
  },
  {
    q: "Do I sometimes not listen properly? üòÖ",
    img: "media/q3.jpg",
    caption: "Listening to each other üëÇ",
    options: ["Never! You're perfect ü•∞", "Sometimes, but it's cute üòä", "Always! üòè"],
    correct: 1
  },
  {
    q: "Will I always be there for you? ‚ù§Ô∏è",
    img: "media/q4.jpg",
    caption: "Always together ü§ó",
    options: ["Always and forever üíñ", "Most of the time", "When convenient"],
    correct: 0
  },
  {
    q: "Is my ego a bit big sometimes? üëë",
    img: "media/q5.jpg",
    caption: "Proud moments ‚ú®",
    options: ["Yes, but I love it üòÖ", "No, you're humble", "Only sometimes"],
    correct: 0
  },
  {
    q: "How helpful am I at home? üè†",
    img: "media/q6.jpg",
    caption: "Home sweet home üè°",
    options: ["Extremely helpful! üòá", "Sometimes helpful", "I disappear sometimes üòÖ"],
    correct: 1
  },
  {
    q: "Rate my fashion sense! üëî",
    img: "media/q7.jpg",
    caption: "Stylish moments üëó",
    options: ["Perfect! Fashion icon üòé", "Good most of the time", "Needs improvement üòÖ"],
    correct: 1
  },
  {
    q: "When was our first kiss? üòò",
    img: "media/q8.jpg",
    caption: "First kiss memory üíã",
    options: ["December 11, 2023", "December 10, 2023", "December 12, 2023"],
    correct: 0
  },
  {
    q: "Do you believe in our future together? ‚ú®",
    img: "media/q9.jpg",
    caption: "Our bright future üåü",
    options: ["Yes, forever and always üí´", "I hope so", "Let's see"],
    correct: 0
  },
  {
    q: "Do I love you more than I show? ü•π",
    img: "media/q10.jpg",
    caption: "Love beyond words üíñ",
    options: ["Yes, immensely! üíï", "About the same", "You show plenty"],
    correct: 0
  },
  {
    q: "Will you be my Valentine forever? üíò",
    img: "media/q11.jpg",
    caption: "My forever Valentine üíù",
    options: ["YES! Forever and always! ‚ù§Ô∏è", "Of course! üíï", "Absolutely! üòò"],
    correct: 0
  }
];

// Game State
let currentQuestion = 0;
let score = 0;
let answered = false;
let userAnswers = [];

// Infinity Love Loop variables
let loopCount = 0;
let infinitySpeed = 1;
let isReversed = false;

// DOM Elements
const startScreen = document.getElementById('startScreen');
const quizContainer = document.getElementById('quizContainer');
const scoreDisplay = document.getElementById('scoreDisplay');
const questionText = document.getElementById('questionText');
const optionsContainer = document.getElementById('optionsContainer');
const questionImage = document.getElementById('questionImage');
const nextBtn = document.getElementById('nextBtn');
const progressBar = document.getElementById('progressBar');
const questionNumber = document.getElementById('questionNumber');
const scoreValue = document.getElementById('scoreValue');
const scoreMessage = document.getElementById('scoreMessage');
const quoteContainer = document.getElementById('quoteContainer');
const quoteText = document.getElementById('quoteText');
const quoteAuthor = document.getElementById('quoteAuthor');
const loveWeatherContainer = document.getElementById('loveWeatherContainer');
const infinityLoveContainer = document.getElementById('infinityLoveContainer');

// Interactive Canvas Setup
const canvas = document.getElementById('heartCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let hearts = [];
let particles = [];

// Heart class for background animation
class Heart {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = canvas.height + 50;
    this.size = Math.random() * 20 + 10;
    this.speed = Math.random() * 2 + 1;
    this.color = `hsl(${Math.random() * 360}, 100%, 70%)`;
    this.opacity = Math.random() * 0.5 + 0.3;
  }

  update() {
    this.y -= this.speed;
    if (this.y < -50) {
      this.y = canvas.height + 50;
      this.x = Math.random() * canvas.width;
    }
  }

  draw() {
    ctx.save();
    ctx.globalAlpha = this.opacity;
    ctx.fillStyle = this.color;
    
    // Draw heart shape
    ctx.beginPath();
    const topCurveHeight = this.size * 0.3;
    ctx.moveTo(this.x, this.y + topCurveHeight);
    ctx.bezierCurveTo(
      this.x, this.y,
      this.x - this.size, this.y,
      this.x - this.size, this.y + topCurveHeight
    );
    ctx.bezierCurveTo(
      this.x - this.size, this.y + (this.size + topCurveHeight) / 2,
      this.x, this.y + (this.size + topCurveHeight) / 2,
      this.x, this.y + this.size
    );
    ctx.bezierCurveTo(
      this.x, this.y + (this.size + topCurveHeight) / 2,
      this.x + this.size, this.y + (this.size + topCurveHeight) / 2,
      this.x + this.size, this.y + topCurveHeight
    );
    ctx.bezierCurveTo(
      this.x + this.size, this.y,
      this.x, this.y,
      this.x, this.y + topCurveHeight
    );
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }
}

// Initialize background hearts
for (let i = 0; i < 50; i++) {
  hearts.push(new Heart());
}

// Animation loop
function animateHearts() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  hearts.forEach(heart => {
    heart.update();
    heart.draw();
  });
  
  particles.forEach((particle, index) => {
    particle.update();
    particle.draw();
    
    if (particle.size <= 0.5) {
      particles.splice(index, 1);
    }
  });
  
  requestAnimationFrame(animateHearts);
}

// Start the animation
animateHearts();

// Start Quiz
function startQuiz() {
  startScreen.style.display = 'none';
  quizContainer.style.display = 'block';
  
  // Start background music
  const audio = new Audio('https://assets.mixkit.co/music/preview/mixkit-romantic-sunset-443.mp3');
  audio.volume = 0.3;
  audio.loop = true;
  audio.play().catch(e => console.log("Audio play failed:", e));
  
  loadQuestion();
}

// Load Question
function loadQuestion() {
  answered = false;
  const question = questions[currentQuestion];
  
  // Update UI
  questionNumber.textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
  questionText.textContent = question.q;
  questionImage.src = question.img;
  progressBar.style.width = `${((currentQuestion) / questions.length) * 100}%`;
  
  // Hide quote container
  quoteContainer.style.display = 'none';
  
  // Clear and add options
  optionsContainer.innerHTML = '';
  question.options.forEach((option, index) => {
    const button = document.createElement('button');
    button.className = 'option-btn';
    button.innerHTML = option;
    button.onclick = () => selectAnswer(index);
    optionsContainer.appendChild(button);
  });
  
  nextBtn.style.display = 'none';
}

// Show random quote
function showQuote() {
  const randomIndex = Math.floor(Math.random() * romanticQuotes.length);
  quoteText.textContent = romanticQuotes[randomIndex];
  quoteAuthor.textContent = `‚Äî ${quoteAuthors[randomIndex]}`;
  quoteContainer.style.display = 'block';
  
  // Remove this quote from arrays so it doesn't repeat
  romanticQuotes.splice(randomIndex, 1);
  quoteAuthors.splice(randomIndex, 1);
}

// Select Answer
function selectAnswer(index) {
  if (answered) return;
  
  answered = true;
  const question = questions[currentQuestion];
  const buttons = document.querySelectorAll('.option-btn');
  const isCorrect = index === question.correct;
  
  // Store user's answer
  userAnswers.push({
    question: question.q,
    userAnswer: question.options[index],
    correctAnswer: question.options[question.correct],
    isCorrect: isCorrect
  });
  
  // Update score
  if (isCorrect) {
    score++;
    createParticles(100);
  }
  
  // Style buttons
  buttons.forEach((btn, btnIndex) => {
    if (btnIndex === question.correct) {
      btn.classList.add('correct');
    } else if (btnIndex === index && !isCorrect) {
      btn.classList.add('wrong');
    }
    btn.disabled = true;
  });
  
  // Show quote after answer
  setTimeout(() => {
    showQuote();
    nextBtn.style.display = 'block';
  }, 800);
}

// Next Question
function nextQuestion() {
  currentQuestion++;
  
  if (currentQuestion < questions.length) {
    loadQuestion();
  } else {
    showScore();
  }
}

// Show Score
function showScore() {
  quizContainer.style.display = 'none';
  scoreDisplay.style.display = 'block';
  
  // Update score display
  scoreValue.textContent = `${score}/${questions.length}`;
  
  // Set message based on score
  let message = "";
  if (score === questions.length) {
    message = "PERFECT! ü•∞ You know our love story perfectly! You're my soulmate! üíñ";
    createParticles(200);
  } else if (score >= questions.length - 2) {
    message = "Excellent! üíï You know me so well! Our love is strong and beautiful! ‚ú®";
    createParticles(100);
  } else if (score >= questions.length / 2) {
    message = "Good job! üòä You know me pretty well! Let's make more memories together! üíù";
    createParticles(50);
  } else {
    message = "That's okay! üíñ What matters is our love, not the score! Let's create more beautiful moments! üåà";
    createParticles(30);
  }
  
  scoreMessage.innerHTML = message;
  
  // Add special features
  showLoveWeatherWithDomino();
  showInfinityLove();
}

// Create Love Weather with Domino sides
function showLoveWeatherWithDomino() {
  const loveForecast = [
    { day: "Today", forecast: "Sunny with 100% chance of love ‚òÄÔ∏è", temp: "üíñ 99¬∞F", icon: "‚òÄÔ∏è" },
    { day: "Tomorrow", forecast: "Clear skies with warm hugs üå§Ô∏è", temp: "üíï 101¬∞F", icon: "üå§Ô∏è" },
    { day: "This Week", forecast: "Perfect conditions for cuddles üåà", temp: "üíò 103¬∞F", icon: "üåà" },
    { day: "This Month", forecast: "Heavy romance showers expected üåßÔ∏è", temp: "üíù 105¬∞F", icon: "üåßÔ∏è" },
    { day: "This Year", forecast: "Year of love and happiness üåü", temp: "üíû 107¬∞F", icon: "üåü" },
    { day: "Forever", forecast: "Eternal sunshine of our love ‚òÄÔ∏è", temp: "üíó ‚àû¬∞F", icon: "‚òÄÔ∏è" }
  ];
  
  // Split questions for left and right columns
  const leftQuestions = questions.slice(0, Math.ceil(questions.length / 2));
  const rightQuestions = questions.slice(Math.ceil(questions.length / 2));
  
  loveWeatherContainer.innerHTML = `
    <div class="love-weather-container">
      <!-- Left Domino Column -->
      <div class="domino-column left">
        ${leftQuestions.map((question, index) => `
          <div class="domino-piece" style="--index: ${index}" onclick="showMemoryDetail(${index})">
            <div class="domino-number">${index + 1}</div>
            <img src="${question.img}" alt="Memory ${index + 1}" onerror="this.src='https://images.unsplash.com/photo-15${index}74352633-eb9e6e55a${index}cd?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'">
          </div>
        `).join('')}
      </div>
      
      <!-- Center Love Weather -->
      <div class="love-weather">
        <h3>üå§Ô∏è Our Love Weather Forecast üå§Ô∏è</h3>
        <div class="weather-cards">
          ${loveForecast.map((day, index) => `
            <div class="weather-card" style="animation-delay: ${index * 0.2}s">
              <div class="weather-day">${day.day}</div>
              <div class="weather-icon">${day.icon}</div>
              <div class="weather-temp">${day.temp}</div>
              <div class="weather-desc">${day.forecast}</div>
            </div>
          `).join('')}
        </div>
        
        <div class="weather-radar">
          <h4 style="text-align: center; margin-bottom: 20px; color: #ffccdd;">Love Radar Scan üì°</h4>
          <div class="radar-screen">
            <div class="radar-sweep"></div>
            <div class="love-blip" style="--delay: 0"></div>
            <div class="love-blip" style="--delay: 1"></div>
            <div class="love-blip" style="--delay: 2"></div>
            <div class="radar-label">Scanning for love signals... üíò</div>
          </div>
        </div>
      </div>
      
      <!-- Right Domino Column -->
      <div class="domino-column right">
        ${rightQuestions.map((question, index) => `
          <div class="domino-piece" style="--index: ${index}" onclick="showMemoryDetail(${index + leftQuestions.length})">
            <div class="domino-number">${index + leftQuestions.length + 1}</div>
            <img src="${question.img}" alt="Memory ${index + leftQuestions.length + 1}" onerror="this.src='https://images.unsplash.com/photo-15${index + leftQuestions.length}74352633-eb9e6e55a${index + leftQuestions.length}cd?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'">
          </div>
        `).join('')}
      </div>
    </div>
  `;
  
  // Animate domino pieces after a delay
  setTimeout(() => {
    const pieces = document.querySelectorAll('.domino-piece');
    pieces.forEach((piece, index) => {
      piece.style.animationDelay = `${index * 0.1}s`;
    });
  }, 300);
}

// Show memory detail when clicked
function showMemoryDetail(index) {
  if (index >= 0 && index < questions.length) {
    const question = questions[index];
    showSpecialMessage(`Memory ${index + 1}: ${question.caption} üíï`);
    
    // Create a floating enlarged version
    const enlarged = document.createElement('div');
    enlarged.innerHTML = `
      <div style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:10000; display:flex; align-items:center; justify-content:center; padding:20px;">
        <div style="position:relative; max-width:500px; max-height:80vh;">
          <button onclick="this.parentElement.parentElement.remove()" style="position:absolute; top:-40px; right:0; background:#ff3366; color:white; border:none; width:40px; height:40px; border-radius:50%; font-size:20px; cursor:pointer; z-index:10001;">‚úï</button>
          <img src="${question.img}" alt="Memory ${index + 1}" style="width:100%; height:100%; object-fit:contain; border-radius:20px; border:5px solid white; box-shadow:0 20px 50px rgba(0,0,0,0.5);" 
               onerror="this.src='https://images.unsplash.com/photo-15${index}74352633-eb9e6e55a${index}cd?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80'">
          <div style="text-align:center; margin-top:20px; color:white; font-size:1.2rem;">
            <strong>Memory ${index + 1}</strong><br>
            ${question.caption}
          </div>
        </div>
      </div>
    `;
    document.body.appendChild(enlarged);
  }
}

// Show Infinity Love Loop
function showInfinityLove() {
  infinityLoveContainer.innerHTML = `
    <div class="infinity-love">
      <h3>‚ôæÔ∏è Infinite Love Loop ‚ôæÔ∏è</h3>
      <div class="infinity-container">
        <div class="infinity-symbol" id="infinitySymbol">‚àû</div>
        <div class="floating-hearts">
          ${Array(12).fill(0).map((_, i) => `
            <div class="floating-heart" style="--i: ${i}">${getRandomHeart()}</div>
          `).join('')}
        </div>
      </div>
      
      <div class="infinity-controls">
        <button onclick="changeInfinitySpeed(1)">‚è© Faster</button>
        <button onclick="changeInfinitySpeed(-1)">‚è™ Slower</button>
        <button onclick="reverseInfinity()">üîÑ Reverse</button>
        <button onclick="addMoreHearts()">‚ú® Add Hearts</button>
      </div>
      
      <div class="infinity-counter">
        <span id="loopCount">0</span> Love Cycles Completed
      </div>
      
      <div class="infinity-message">
        Our love has no beginning and no end... it's infinite! üí´
        <br><small>Our score of ${score}/${questions.length} shows ${score >= questions.length - 2 ? 'perfect synchronization!' : 'beautiful harmony!'}</small>
      </div>
    </div>
  `;
  
  // Start loop counter
  startLoopCounter();
}

function getRandomHeart() {
  const hearts = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'üíû', 'üíù', 'üíò', 'üíü'];
  return hearts[Math.floor(Math.random() * hearts.length)];
}

function startLoopCounter() {
  const counter = setInterval(() => {
    loopCount++;
    const loopCountElement = document.getElementById('loopCount');
    if (loopCountElement) {
      loopCountElement.textContent = loopCount;
    } else {
      clearInterval(counter);
    }
    
    // Special messages at certain counts
    if(loopCount === 10) showSpecialMessage("10 cycles of love! Our bond is growing! üíï");
    if(loopCount === 50) showSpecialMessage("50 cycles! Halfway to infinity! ‚ú®");
    if(loopCount === 100) {
      showSpecialMessage("100 cycles of eternal love! üíØ");
      createHeartsExplosion();
    }
  }, 1000); // Update every second
}

function changeInfinitySpeed(direction) {
  infinitySpeed += direction * 0.2;
  infinitySpeed = Math.max(0.1, Math.min(3, infinitySpeed));
  
  const symbol = document.getElementById('infinitySymbol');
  if (symbol) {
    symbol.style.animationDuration = `${4 / infinitySpeed}s`;
  }
  
  // Update floating hearts speed
  const hearts = document.querySelectorAll('.floating-heart');
  hearts.forEach(heart => {
    heart.style.animationDuration = `${10 / infinitySpeed}s`;
  });
  
  showSpecialMessage(`Speed: ${(infinitySpeed * 100).toFixed(0)}%`);
}

function reverseInfinity() {
  isReversed = !isReversed;
  const symbol = document.getElementById('infinitySymbol');
  if (symbol) {
    symbol.style.animationDirection = isReversed ? 'reverse' : 'normal';
  }
  
  // Reverse floating hearts
  const hearts = document.querySelectorAll('.floating-heart');
  hearts.forEach(heart => {
    heart.style.animationDirection = isReversed ? 'reverse' : 'normal';
  });
  
  showSpecialMessage(isReversed ? "Love flowing backwards in time! ‚è™" : "Love flowing forward eternally! ‚è©");
}

function addMoreHearts() {
  const floatingHearts = document.querySelector('.floating-hearts');
  if (!floatingHearts) return;
  
  const newHeart = document.createElement('div');
  const i = document.querySelectorAll('.floating-heart').length;
  newHeart.className = 'floating-heart';
  newHeart.style.cssText = `
    --i: ${i};
    animation: floatAround ${10 / infinitySpeed}s linear infinite;
    animation-delay: calc(var(--i) * -1s);
    animation-direction: ${isReversed ? 'reverse' : 'normal'};
  `;
  newHeart.innerHTML = getRandomHeart();
  floatingHearts.appendChild(newHeart);
  
  createHeartsExplosion();
  showSpecialMessage("Added more love to our infinite loop! üíñ");
}

function createHeartsExplosion() {
  for(let i = 0; i < 20; i++) {
    setTimeout(() => {
      createFloatingHeart();
    }, i * 50);
  }
}

function createFloatingHeart() {
  const heart = document.createElement('div');
  heart.innerHTML = getRandomHeart();
  heart.style.cssText = `
    position: fixed;
    font-size: ${Math.random() * 30 + 20}px;
    left: ${Math.random() * 100}%;
    top: 100%;
    animation: floatUp ${Math.random() * 3 + 2}s ease-in forwards;
    z-index: 10000;
    pointer-events: none;
    filter: drop-shadow(0 0 5px rgba(255,51,102,0.5));
  `;
  
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 5000);
}

// Add this new animation
const style = document.createElement('style');
style.textContent = `
  @keyframes floatUp {
    0% {
      transform: translateY(0) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(-100vh) rotate(360deg);
      opacity: 0;
    }
  }
`;
document.head.appendChild(style);

function showSpecialMessage(text) {
  const message = document.createElement('div');
  message.textContent = text;
  message.style.cssText = `
    position: fixed;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(45deg, #ff3366, #ff6699);
    color: white;
    padding: 10px 20px;
    border-radius: 25px;
    z-index: 10000;
    animation: fadeInOut 2s ease-out forwards;
    box-shadow: 0 5px 20px rgba(255,51,102,0.3);
  `;
  
  document.body.appendChild(message);
  setTimeout(() => message.remove(), 2000);
}

// Add fadeInOut animation
const fadeStyle = document.createElement('style');
fadeStyle.textContent = `
  @keyframes fadeInOut {
    0% { opacity: 0; transform: translate(-50%, -20px); }
    20% { opacity: 1; transform: translate(-50%, 0); }
    80% { opacity: 1; transform: translate(-50%, 0); }
    100% { opacity: 0; transform: translate(-50%, 20px); }
  }
`;
document.head.appendChild(fadeStyle);

// Create Celebration Particles
function createParticles(count) {
  for (let i = 0; i < count; i++) {
    particles.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      size: Math.random() * 5 + 2,
      speedX: Math.random() * 6 - 3,
      speedY: Math.random() * 6 - 3,
      color: `hsl(${Math.random() * 360}, 100%, 70%)`,
      life: 100
    });
  }
}

// Particle update function
function updateParticles() {
  particles.forEach(particle => {
    particle.x += particle.speedX;
    particle.y += particle.speedY;
    particle.life -= 1;
    particle.size *= 0.97;
    
    particle.draw = function() {
      ctx.save();
      ctx.globalAlpha = particle.life / 100;
      ctx.fillStyle = particle.color;
      ctx.beginPath();
      ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
      ctx.fill();
      ctx.restore();
    };
  });
}

// Restart Quiz
function restartQuiz() {
  currentQuestion = 0;
  score = 0;
  answered = false;
  userAnswers = [];
  loopCount = 0;
  infinitySpeed = 1;
  isReversed = false;
  
  scoreDisplay.style.display = 'none';
  startScreen.style.display = 'flex';
  
  // Reset all buttons
  const buttons = document.querySelectorAll('.option-btn');
  buttons.forEach(btn => {
    btn.classList.remove('correct', 'wrong');
    btn.disabled = false;
  });
  
  // Clear special features
  loveWeatherContainer.innerHTML = '';
  infinityLoveContainer.innerHTML = '';
}

// Handle window resize
window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});

// Initialize
window.addEventListener('load', () => {
  // Preload images
  questions.forEach(q => {
    const img = new Image();
    img.src = q.img;
  });
});
</script>
</body>
</html>